---
- name: Deploy YOLO Application - Development Only
  hosts: all
  become: true
  vars:
    app_env: development

  pre_tasks:
    - name: Load development variables
      include_vars: 
        file: "../group_vars/all.yml"

    - name: Update apt cache
      apt:
        update_cache: yes

  roles:
    - role: common
      tags: [common]

    - role: docker
      tags: [docker]

    - role: mongodb
      tags: [mongodb]

    - role: backend
      tags: [backend]

    - role: frontend
      tags: [frontend]

  post_tasks:
    - name: Dev environment info
      debug:
        msg:
          - "Development environment ready"
          - "Frontend: http://localhost:{{ frontend_port }}"
          - "Backend: http://localhost:{{ backend_port }}"
          - "MongoDB: mongodb://localhost:{{ mongodb_port }}"